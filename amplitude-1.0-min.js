(function(e,t){var r=function(e){console.log("[Amplitude] "+e)};var n=Array.isArray||function(e){return toString.call(e)==="[object Array]"};var i=function(e){var t=[];for(var r in e){var i=e[r];if(n(i)){for(var o=0;o<i.length;o++){t.push(encodeURIComponent(r)+"="+encodeURIComponent(i[o]))}}else{t.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}}return t.join("&")};var o=function(){var e=[];for(var t=0;t<32;t++){e[t]=Math.floor(Math.random()*16).toString(16)}var r=e.join("");return r};var a;if(e.localStorage){a=e.localStorage}else if(e.globalStorage){try{a=e.globalStorage[e.location.hostname]}catch(s){}}else{var d=t.createElement("div"),c="localStorage";d.style.display="none";t.getElementsByTagName("head")[0].appendChild(d);if(d.addBehavior){d.addBehavior("#default#userdata");a={length:0,setItem:function(e,t){d.load(c);if(!d.getAttribute(e)){this.length++}d.setAttribute(e,t);d.save(c)},getItem:function(e){d.load(c);return d.getAttribute(e)},removeItem:function(e){d.load(c);if(d.getAttribute(e)){this.length--}d.removeAttribute(e);d.save(c)},clear:function(){d.load(c);var e=0;var t;while(t=d.XMLDocument.documentElement.attributes[e++]){d.removeAttribute(t.name)}d.save(c);this.length=0},key:function(e){d.load(c);return d.XMLDocument.documentElement.attributes[e]}};d.load(c);a.length=d.XMLDocument.documentElement.attributes.length}else{}}if(!a){a={length:0,setItem:function(e,t){},getItem:function(e){},removeItem:function(e){},clear:function(){},key:function(e){}}}var u={encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);if(n<128){t+=String.fromCharCode(n)}else if(n>127&&n<2048){t+=String.fromCharCode(n>>6|192);t+=String.fromCharCode(n&63|128)}else{t+=String.fromCharCode(n>>12|224);t+=String.fromCharCode(n>>6&63|128);t+=String.fromCharCode(n&63|128)}}return t},decode:function(e){var t="";var r=0;var n=0,i=0,o=0;while(r<e.length){n=e.charCodeAt(r);if(n<128){t+=String.fromCharCode(n);r++}else if(n>191&&n<224){i=e.charCodeAt(r+1);t+=String.fromCharCode((n&31)<<6|i&63);r+=2}else{i=e.charCodeAt(r+1);o=e.charCodeAt(r+2);t+=String.fromCharCode((n&15)<<12|(i&63)<<6|o&63);r+=3}}return t}};var l={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){try{if(e.btoa&&e.atob){return e.btoa(unescape(encodeURIComponent(t)))}}catch(r){return l._encode(t)}},_encode:function(e){var t="";var r,n,i,o,a,s,d;var c=0;e=u.encode(e);while(c<e.length){r=e.charCodeAt(c++);n=e.charCodeAt(c++);i=e.charCodeAt(c++);o=r>>2;a=(r&3)<<4|n>>4;s=(n&15)<<2|i>>6;d=i&63;if(isNaN(n)){s=d=64}else if(isNaN(i)){d=64}t=t+l._keyStr.charAt(o)+l._keyStr.charAt(a)+l._keyStr.charAt(s)+l._keyStr.charAt(d)}return t},decode:function(t){try{if(e.btoa&&e.atob){return decodeURIComponent(escape(e.atob(t)))}}catch(r){return l._decode(t)}},_decode:function(e){var t="";var r,n,i;var o,a,s,d;var c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<e.length){o=l._keyStr.indexOf(e.charAt(c++));a=l._keyStr.indexOf(e.charAt(c++));s=l._keyStr.indexOf(e.charAt(c++));d=l._keyStr.indexOf(e.charAt(c++));r=o<<2|a>>4;n=(a&15)<<4|s>>2;i=(s&3)<<6|d;t=t+String.fromCharCode(r);if(s!=64){t=t+String.fromCharCode(n)}if(d!=64){t=t+String.fromCharCode(i)}}t=u.decode(t);return t}};var h=navigator.userAgent;var g=navigator.vendor;var v=navigator.platform;var f={init:function(){this.browser=this.searchString(this.dataBrowser)||null;this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||null;this.OS=this.searchString(this.dataOS)||null},searchString:function(e){for(var t=0;t<e.length;t++){var r=e[t].string;var n=e[t].prop;this.versionSearchString=e[t].versionSearch||e[t].identity;if(r){if(r.indexOf(e[t].subString)!=-1){return e[t].identity}}else if(n){return e[t].identity}}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(t==-1){return}return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:h,subString:"Chrome",identity:"Chrome"},{string:h,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:g,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:e.opera,identity:"Opera",versionSearch:"Version"},{string:g,subString:"iCab",identity:"iCab"},{string:g,subString:"KDE",identity:"Konqueror"},{string:h,subString:"Firefox",identity:"Firefox"},{string:g,subString:"Camino",identity:"Camino"},{string:h,subString:"Netscape",identity:"Netscape"},{string:h,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:h,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:h,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:v,subString:"Win",identity:"Windows"},{string:v,subString:"Mac",identity:"Mac"},{string:h,subString:"iPhone",identity:"iPhone/iPod"},{string:h,subString:"Android",identity:"Android"},{string:v,subString:"Linux",identity:"Linux"}]};f.init();var p=function(e,t){this.url=e;this.data=t||{}};p.prototype.send=function(e){var t=new XMLHttpRequest;t.open("POST",this.url,true);t.onreadystatechange=function(){if(t.readyState==4){e(t.status,t.responseText)}};t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");t.send(i(this.data))};var m={get:function(e){var r=e+"=";var n=t.cookie.split(";");for(var i=0;i<n.length;i++){var o=n[i];while(o.charAt(0)==" "){o=o.substring(1,o.length)}if(o.indexOf(r)==0){return o.substring(r.length,o.length)}}return null},set:function(e,r,n){if(n){var i=new Date;i.setTime(i.getTime()+n*24*60*60*1e3);var o="; expires="+i.toGMTString()}else{var o=""}t.cookie=e+"="+r+o+"; path=/"},remove:function(e){m.set(e,"",-1)}};var S=function(){};var y={apiEndpoint:"api.amplitude.com",cookieName:"amplitude_id",cookieExpiration:365*10,unsentKey:"amplitude_unsent"};var b=0;var C=[];var I=false;var A=function(){b++;return b};S.prototype.init=function(e,t){this.options=y;y.apiKey=e;var r=m.get(y.cookieName);var n=null;if(r){try{n=JSON.parse(l.decode(r));if(n){if(n.deviceId){y.deviceId=n.deviceId}if(n.userId){y.userId=n.userId}if(n.globalUserProperties){y.globalUserProperties=n.globalUserProperties}}}catch(i){}}y.deviceId=y.deviceId||o();y.userId=t!==undefined&&t!==null&&t||y.userId||null;_();b=0;var s=a.getItem(y.unsentKey);var d=[];if(s){try{d=JSON.parse(s)}catch(i){}}if(d.length>0){this.sendEvents()}};var _=function(){m.set(y.cookieName,l.encode(JSON.stringify({deviceId:y.deviceId,userId:y.userId,globalUserProperties:y.globalUserProperties})),y.cookieExpiration)};S.prototype.setUserId=function(e){y.userId=e!==undefined&&e!==null&&""+e||null;_()};S.prototype.setGlobalUserProperties=function(e){y.globalUserProperties=e;_()};S.prototype.setVersionName=function(e){y.versionName=e};S.prototype.logEvent=function(e,t){var r=(new Date).getTime();t=t||{};var n={device_id:y.deviceId,user_id:y.userId||y.deviceId,timestamp:r,event_id:A(),session_id:-1,event_type:e,client:f.browser,version_code:0,version_name:y.versionName||null,build_version_sdk:0,build_version_release:f.version,phone_model:f.OS,custom_properties:t,global_properties:y.globalUserProperties||{}};C.push(n);try{a.setItem(y.unsentKey,JSON.stringify(C))}catch(i){}this.sendEvents()};S.prototype.sendEvents=function(){if(!I){I=true;var t=("https:"==e.location.protocol?"https":"http")+"://"+y.apiEndpoint+"/";var r={client:y.apiKey,e:JSON.stringify(C)};var n=C.length;var i=this;new p(t,r).send(function(e,t){I=false;try{if(e==200&&JSON.parse(t).added==n){C.splice(0,n);try{a.setItem(y.unsentKey,JSON.stringify(C))}catch(r){}if(C.length>0){i.sendEvents()}}}catch(r){}})}};var O=e.amplitude||{};var N=O._q||[];var k=new S;e.amplitude=k;for(var w=0;w<N.length;w++){var E=k[N[w][0]];E&&E.apply(k,N[w].slice(1))}})(window,document);